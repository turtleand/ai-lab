---
title: "Agentes IA persistentes"
module: "Module 0: Setup & Safety"
subtopic: "persistent-agents"
summary: "Despliega un agente IA siempre activo en un servidor con mensajería y seguridad."
status: "done"
---

## ¿Qué es un agente IA persistente?

En lugar de abrir una ventana de chat cuando necesitas ayuda, un agente persistente corre 24/7 en un servidor. Puedes enviarle mensajes desde tu teléfono y recibir respuestas en cualquier momento.

[OpenClaw](https://openclaw.ai/) es un framework open-source para esto. Te permite:

- Recibir mensajes via Telegram, Signal o Discord
- Ejecutar comandos y gestionar archivos en un servidor
- Correr tareas programadas automáticamente
- Recordar contexto entre conversaciones

Piénsalo como:

> "Un asistente IA viviendo en un servidor, disponible cuando lo necesites."

---

## Importante: Términos de servicio

Antes de configurar esto, ten en cuenta posibles problemas:

- **Reglas de uso de API** — Algunos proveedores de IA pueden restringir el uso automatizado o persistente de sus APIs. Hay [reportes de Anthropic baneando usuarios](https://blogs.cisco.com/ai/personal-ai-agents-like-openclaw-are-a-security-nightmare) que corren OpenClaw con credenciales de Claude.

- **Riesgos de seguridad** — Correr una IA con acceso a shell en un servidor es poderoso pero riesgoso. [Investigadores de seguridad advierten](https://www.darkreading.com/application-security/openclaw-ai-runs-wild-business-environments) sobre riesgos de supply chain con módulos de terceros.

**Recomendación:** Lee los términos de servicio de tu proveedor de IA. Considera correrlo en un sandbox aislado. No lo conectes a sistemas de producción.

---

## Por qué correr un agente persistente

Un agente persistente cambia la interacción de "abro un chat" a "le escribo a mi asistente."

**Beneficios:**
- **Siempre disponible** — Escribe desde tu teléfono, recibe respuesta
- **Capacidades proactivas** — Programa tareas, corre chequeos, envía recordatorios
- **Contexto compartido** — La memoria persiste entre sesiones
- **Superficie de integración** — Un agente conectando calendario, archivos, APIs

**Bueno para:**
- Asistente IA accesible desde cualquier lugar
- Tareas recurrentes que se benefician de automatización
- Experimentar con capacidades de agentes
- Ser dueño de tu infraestructura

**No ideal si:**
- Solo necesitas interacciones ocasionales
- No quieres gestionar un servidor
- Claude.ai o Claude Code ya cubren tus necesidades

---

## Requisitos

Antes de empezar:

- **Servidor cloud** — EC2, DigitalOcean, o cualquier VPS Linux (1 vCPU, 1 GB RAM mínimo)
- **Acceso SSH** — Autenticación por clave configurada
- **Node.js 18+** — OpenClaw corre en Node
- **Clave API** — Anthropic, OpenAI, u otro proveedor
- **Cuenta de mensajería** — Token de bot Telegram, número Signal, o bot Discord

---

## Guía de configuración

Esto documenta la configuración en una instancia AWS EC2 con Telegram.

### 1. Instalar OpenClaw

```bash
# Instalar Node.js si es necesario
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt-get install -y nodejs

# Instalar OpenClaw globalmente
sudo npm install -g openclaw
```

### 2. Ejecutar el asistente de configuración

```bash
openclaw doctor
```

El asistente configura:
- Clave API
- Selección de modelo (Opus, Sonnet, Haiku)
- Directorio de workspace
- Canales de mensajería

### 3. Configurar Telegram

Crea un bot via [@BotFather](https://t.me/botfather):

1. Envía `/newbot` y sigue las instrucciones
2. Copia el token del bot
3. Agrégalo a la config de OpenClaw cuando te lo pida

Aprueba tu usuario con:

```bash
openclaw pairing approve telegram <CODIGO>
```

### 4. Ejecutar como servicio

```bash
# Instalar servicio systemd
openclaw gateway install

# Iniciar el servicio
openclaw gateway start

# Verificar estado
openclaw status
```

El agente ahora corre persistentemente y sobrevive reinicios.

---

## Endurecimiento de seguridad

Un servidor corriendo una IA con acceso a shell requiere seguridad cuidadosa.

### Firewall

```bash
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw enable
```

### Fail2ban (protección SSH)

```bash
sudo apt install fail2ban

sudo tee /etc/fail2ban/jail.local << 'EOF'
[sshd]
enabled = true
port = ssh
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600
findtime = 600
EOF

sudo systemctl enable fail2ban
sudo systemctl start fail2ban
```

Después de 3 intentos fallidos de SSH en 10 minutos, la IP es baneada por 1 hora.

### Permisos de archivos

```bash
chmod 700 ~/.openclaw
chmod 600 ~/.openclaw/openclaw.json
```

Los archivos de configuración contienen claves API. Restringe el acceso.

### Lista de usuarios permitidos

OpenClaw usa modo de emparejamiento — usuarios desconocidos no pueden interactuar sin aprobación. Los usuarios aprobados se guardan en:

```
~/.openclaw/credentials/telegram-allowFrom.json
```

---

## Memoria y contexto

OpenClaw mantiene archivos de workspace que persisten:

```
~/.openclaw/workspace/
├── AGENTS.md      # Guías de comportamiento del agente
├── SOUL.md        # Personalidad y límites
├── USER.md        # Info sobre ti
├── MEMORY.md      # Memoria curada a largo plazo
├── TOOLS.md       # Notas de herramientas locales
└── memory/
    └── 2026-02-02.md  # Logs diarios
```

**Qué poner en memoria:**
- Decisiones y su razonamiento
- Contexto de proyectos y preferencias
- Lecciones aprendidas
- Tareas recurrentes

La memoria es continuidad. Sin ella, cada sesión empieza de cero.

---

## Cómo lo uso

1. **Mensaje desde el teléfono** — pido al agente que investigue, redacte, o verifique estado
2. **El agente trabaja** — tiene acceso al servidor, puede buscar en web, leer archivos, ejecutar comandos
3. **Llega la respuesta** — resultados vía Telegram
4. **El agente recuerda** — el contexto persiste para seguimiento

Funciona bien para:
- Investigación rápida lejos del escritorio
- Redactar contenido que se sincroniza a almacenamiento cloud
- Monitorear salud del servidor
- Gestionar tareas recurrentes

---

## Solución de problemas

| Problema | Causa probable | Solución |
|----------|----------------|----------|
| Bot no responde | Servicio detenido | `openclaw gateway start` |
| "Acceso no configurado" | Usuario no aprobado | `openclaw pairing approve telegram <codigo>` |
| Comandos timeout | Red/firewall | Verificar `ufw status`, grupos de seguridad |
| Alto uso de memoria | Contexto muy grande | Reiniciar gateway |
| No puedo SSH | Baneado por fail2ban | `sudo fail2ban-client set sshd unbanip <IP>` |

---

## Fuentes

- [Documentación de OpenClaw](https://docs.openclaw.ai) — guías oficiales de configuración
- [GitHub de OpenClaw](https://github.com/openclaw/openclaw) — código fuente
- [Precios API de Anthropic](https://www.anthropic.com/pricing) — costos de tokens
- [Documentación de Fail2ban](https://www.fail2ban.org) — prevención de intrusiones

---

*Esta configuración corre 24/7 en una instancia micro de EC2. El costo total de infraestructura es manejable para un asistente siempre disponible.*
